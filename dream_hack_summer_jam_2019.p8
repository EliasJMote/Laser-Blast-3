pico-8 cartridge // http://www.pico-8.com
version 17
__lua__
function _init()
	globals = {}

	-- initialize the player
	globals.player = {}
	globals.player.x = 56
	globals.player.y = 56
	globals.player.spr = 1
	globals.player.spd = 2

	-- initialize the sky height
	globals.sky_hgt = 64

	globals.timer = 0
end

function _update()

	-- horizontal player movement --
	-- left
	if(btn(0) and globals.player.x > 0) then
		globals.player.x -= globals.player.spd

	-- right
	elseif(btn(1) and globals.player.x + 16 < 128) then
		globals.player.x += globals.player.spd
	end

	-- vertical player movement --
	-- up
	if(btn(2) and globals.player.y > 0) then
		globals.player.y -= globals.player.spd

	-- down
	elseif(btn(3) and globals.player.y + 24 < 128) then
		globals.player.y += globals.player.spd
	end

	-- decrease sky size when the player is high up
	if(globals.player.y <= 32 and globals.sky_hgt > 32) then
		globals.sky_hgt -= 1

	-- increase sky size when the player is low down
	elseif(globals.player.y + 24 >= 128-32 and globals.sky_hgt < 128-32) then
		globals.sky_hgt += 1
	end

	globals.timer += 1
end

function _draw()
	cls()

	-- draw the backgrounds
	-- draw the sky
	--rectfill(0, 0, 128, globals.sky_hgt, 12)

	line(0, globals.sky_hgt - 14, 128, globals.sky_hgt - 14, 7)
	line(0, globals.sky_hgt - 12, 128, globals.sky_hgt - 12, 7)
	line(0, globals.sky_hgt - 10, 128, globals.sky_hgt - 10, 7)
	rectfill(0, globals.sky_hgt - 8, 128, globals.sky_hgt - 6, 7)
	rectfill(0, globals.sky_hgt - 4, 128, globals.sky_hgt - 2, 7)


	-- draw the grass
	rectfill(0, globals.sky_hgt, 128, 128, 3)

	-- draw the player
	for i=0,3 do
		for j=0,2 do
			if(flr(globals.timer / 6) % 4 == 0) then
				spr(globals.player.spr+16*i+j, globals.player.x+8*j, globals.player.y+8*i)
			elseif(flr(globals.timer / 6) % 4 == 1) then
				spr(globals.player.spr+16*i+j+3, globals.player.x+8*j, globals.player.y+8*i)
			elseif(flr(globals.timer / 6) % 4 == 2) then
				spr(globals.player.spr+16*i+j+6, globals.player.x+8*j, globals.player.y+8*i)
			else
				spr(globals.player.spr+16*i+j+9, globals.player.x+8*j, globals.player.y+8*i)
			end
		end
	end

end
__gfx__
00000000000000001111000000000000000000001111100000000000000000001111000000000000000000001111000000000000000000000000000000000000
00000000000000001cc1100000000000000000001cc1100000000000000000001cc1100000000000000000001cc1000000000000000000000000000000000000
00700700000000011c11100000000000000000011c11100000000000000000011c11100000000000000000011111100000000000000000000000000000000000
000770000000000111c11000000000000000000111111000000000000000000111c1100000000000000000011111100000000000000000000000000000000000
0007700000000091c1111f000000000000000091c1111f000000000000000091c1111f000000000000000091c1111f0000000000000000000000000000000000
0070070000000f91c11119f00000000000000f91c11119f00000000000000f91c11119f00000000000000f91111119f000000000000000000000000000000000
000000000000f991c1111999000000000000f991c1111999000000000000f991c1111999000000000000f9911111199900000000000000000000000000000000
000000000000991cc1111999900000000000991c11111999900000000000991cc1111999900000000000999c1111199990000000000000000000000000000000
000000000009991c11111999990000000009991c11111999990000000009991c11111999990000000009999c1111199999000000000000000000000000000000
000000000009991c11c19909991100000009911111c19909991100000009991c11c19909991100000009990c11c1190999110000000000000000000000000000
0000000000099911c111990091c11000000991c11111990091c1100000099911c111990091c11000000999011111990091c11000000000000000000000000000
000000000009901111199900011c10000009901c1c199900011c10000009901111199900011c10000009900c11119900011c1000000000000000000000000000
00000000000f901c1119900000117000000f90009999900000117000000f901c1119900000117000000f9000cc19900000117000000000000000000000000000
00000000000f90011199900000000000000f90009999900000000000000f90011199900000000000000f90009999900000000000000000000000000000000000
00000000000911009999900000000000000911009999900000000000000911009999900000000000000911009999900000000000000000000000000000000000
00000000000111009999900000000000000111009999900000000000000111009999900000000000000111009999900000000000000000000000000000000000
00000000000011011111110000000000000011011111110000000000000011011111110000000000000011011111110000000000000000000000000000000000
0000000000000001c1cc11000000000000000001c1cc11000000000000000001c1cc11000000000000000001c1cc110000000000000000000000000000000000
000000000000000c11111110000000000000000c11111110000000000000000c11111110000000000000000c1111111000000000000000000000000000000000
00000000000000c111c1c11000000000000000c111c1c11000000000000000c111c1c11000000000000000c111c1c11000000000000000000000000000000000
0000000000000011c11111c00000000000000011c11111c00000000000000011c11111c00000000000000011c11111c000000000000000000000000000000000
00000000000000c11cc11c1000000000000000c11cc11c1000000000000000c11cc11c1000000000000000c11cc11c1000000000000000000000000000000000
00000000000000099000999000000000000000099000999000000000000000099000999000000000000000099000999000000000000000000000000000000000
000000000000000f90009990000000000000000f90009990000000000000000f90009990000000000000000f9000999000000000000000000000000000000000
000000000000009990000f90000000000000009990000f90000000000000009990000f90000000000000009990000f9000000000000000000000000000000000
00000000000000f990000f9000000000000000f990000f9000000000000000f990000f9000000000000000f990000f9000000000000000000000000000000000
00000000000000f99000099000000000000000f99000099000000000000000f99000099000000000000000f99000099000000000000000000000000000000000
00000000000000990000099900000000000000990000099900000000000000990000099900000000000000990000099900000000000000000000000000000000
000000000000011900000911000000000000c11900000911c00000000000011900000911000000000000c11900000911c0000000000000000000000000000000
000000000000011100000111000000000000c111c000c111c00000000000011100000111000000000000c111c000c111c0000000000000000000000000000000
000000000000001100000110000000000000cc11c000c11cc00000000000001100000110000000000000cc11c000c11cc0000000000000000000000000000000
0000000000000000000000000000000000000c7c00000c7c0000000000000000000000000000000000000c7c00000c7c00000000000000000000000000000000
